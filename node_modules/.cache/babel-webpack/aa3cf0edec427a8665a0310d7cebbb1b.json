{"ast":null,"code":"import { finalize, map, switchMap } from \"rxjs/operators\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services\";\nimport * as i2 from \"src/app/services\";\nimport * as i3 from \"./addArt.storage.service\";\nimport * as i4 from \"src/app/services/fire-api.service\";\nimport * as i5 from \"src/app/services/event.buss.service\";\nexport let AddFacade = /*#__PURE__*/(() => {\n  class AddFacade {\n    constructor(ArtApiService, loadingService, storage, fireApiService, eventBus) {\n      this.ArtApiService = ArtApiService;\n      this.loadingService = loadingService;\n      this.storage = storage;\n      this.fireApiService = fireApiService;\n      this.eventBus = eventBus;\n    }\n\n    get lastThreeSearches() {\n      return this.storage.lastThreeSearches;\n    }\n\n    fetchArt(title) {\n      this.loadingService.start();\n      return this.ArtApiService.getArt(title).pipe(switchMap(x => this.ArtApiService.getList(x.objectIDs[0]))).pipe(map(art => ({\n        title: art.title,\n        objectID: art.objectID,\n        credits: art.creditLine,\n        artistBio: art.creditLine,\n        imageUrl: art.primaryImageSmall,\n        artist: art.artistAlphaSort\n      })), finalize(() => {\n        this.loadingService.stop();\n        this.eventBus.emit(\"FORM_RESET_EVENT_KEY\");\n      }));\n    }\n\n    addToLastThreeSearches(key) {\n      this.storage.addTolastSearches(key);\n    }\n\n    restoreState() {\n      this.storage.restoreState();\n    }\n\n    submit(body) {\n      this.fireApiService.addArt(body).subscribe(x => console.log(x));\n    }\n\n  }\n\n  AddFacade.ɵfac = function AddFacade_Factory(t) {\n    return new (t || AddFacade)(i0.ɵɵinject(i1.ArtApiService), i0.ɵɵinject(i2.LoadingService), i0.ɵɵinject(i3.addArtStorage), i0.ɵɵinject(i4.FireApiService), i0.ɵɵinject(i5.EventBusService));\n  };\n\n  AddFacade.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: AddFacade,\n    factory: AddFacade.ɵfac\n  });\n  return AddFacade;\n})();","map":null,"metadata":{},"sourceType":"module"}